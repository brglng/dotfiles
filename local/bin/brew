#!/bin/bash
if [[ ! -x /home/linuxbrew/.linuxbrew/bin/brew ]]; then
    echo "$0: error: /home/linuxbrew/.linuxbrew/bin/brew does not exist or is not executable."
    exit 1
fi
cd /home/linuxbrew
eval $(/home/linuxbrew/.linuxbrew/bin/brew shellenv) > /dev/null

case $1 in
    doctor) ;&
    install) ;&
    postinstall) ;&
    reinstall) ;&
    tap) ;&
    update) ;&
    upgrade) ;&
    uninstall)
        sudo -H --preserve-env=http_proxy --preserve-env=https_proxy --preserve-env=no_proxy --preserve-env=HTTP_PROXY --preserve-env=HTTPS_PROXY --preserve-env=NO_PROXY -u linuxbrew /home/linuxbrew/.linuxbrew/bin/brew "$@"
        ;;
    expose)
        if [[ -x $HOMEBREW_PREFIX/bin/$2  ]]; then
            ln -fs $HOMEBREW_PREFIX/bin/$2 ~/.local/bin/$2
        else
            echo "$0: error: $HOMEBREW_PREFIX/bin/$2 does not exist or is not executable."
            exit 1
        fi
        ;;
    unexpose)
        if [[ -x ~/.local/bin/$2 ]]; then
            rm -f ~/.local/bin/$2 && \
            echo "$0: removed ~/.local/bin/$2"
        else
            echo "$0: ~/.local/bin/$2 does not exist or is not executable."
        fi
        ;;
    which)
        shift
        which "$@"
        ;;
    *)
        $HOMEBREW_PREFIX/bin/brew "$@"
        ;;
esac
